import{r as u,w as B,c as i,o as c,a as x,b as M,v as C,d as E,t as g,_ as H,e as F,f as r,g as p,n as w,F as I,h as N,u as h,i as D}from"./index-CE4I7GDV.js";import{M as K}from"./MovieGrid-B1z-k2Rj.js";function L(t){const a=u([]),e=u(!1),n=u("");async function s(o){if(o){e.value=!0,n.value="";try{const v=await(await fetch(`https://www.omdbapi.com/?s=${o}&apikey=${t}`)).json();v.Response==="True"?a.value=v.Search.slice(0,20):n.value=v.Error}catch{n.value="Ошибка загрузки"}finally{e.value=!1}}}return B(()=>{a.value.length&&console.log("Movies updated:",a.value.length)}),{movies:a,loading:e,error:n,search:s}}const R=["value"],j={__name:"SearchBar",props:{modelValue:String},emits:["update:modelValue","search"],setup(t,{emit:a}){const e=a;function n(s){e("update:modelValue",s.target.value)}return(s,o)=>(c(),i("input",{value:t.modelValue,onInput:n,onKeyup:o[0]||(o[0]=x(f=>e("search"),["enter"])),placeholder:"Поиск..."},null,40,R))}},z={__name:"BaseLoader",props:{show:Boolean},setup(t){return(a,e)=>M((c(),i("div",null,"Загрузка...",512)),[[C,t.show]])}},G={key:0},O={__name:"BaseError",props:{error:String},setup(t){return(a,e)=>t.error?(c(),i("div",G,g(t.error),1)):E("",!0)}},T={class:"page-container"},U={class:"center-content"},q=["onClick"],A={__name:"HomeView",setup(t){const a=D(),e=u(""),n=F({searches:0}),s=u(!1),o=u([]),{movies:f,loading:v,error:V,search:y}=L("6c29f279");function _(){e.value.trim()!==""&&(n.searches++,y(e.value),o.value.includes(e.value)||o.value.unshift(e.value))}function S(d){a.push(`/movie/${d}`)}function $(){s.value=!s.value}function k(d){e.value=d,_(),s.value=!1}return(d,l)=>(c(),i("div",T,[r("div",U,[l[1]||(l[1]=r("h2",null,"Информацию о каком фильме ты хочешь найти?",-1)),p(j,{modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=m=>e.value=m),onSearch:_},null,8,["modelValue"])]),r("button",{class:"sidebar-toggle",onClick:$},[r("span",{class:w({arrow:!s.value,close:s.value})},null,2)]),r("div",{class:w(["sidebar",{open:s.value}])},[l[2]||(l[2]=r("h3",null,"История поиска",-1)),r("ul",null,[(c(!0),i(I,null,N(o.value,(m,b)=>(c(),i("li",{key:b,onClick:J=>k(m)},g(m),9,q))),128))])],2),p(z,{show:h(v)},null,8,["show"]),p(O,{error:h(V)},null,8,["error"]),p(K,{movies:h(f),onSelect:S},null,8,["movies"])]))}},W=H(A,[["__scopeId","data-v-8da93815"]]);export{W as default};
