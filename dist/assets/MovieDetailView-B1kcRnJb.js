import{_ as M,r as u,j as x,l as N,m as S,c as i,f as t,g as D,p as B,q as I,t as l,s as a,d as k,x as C,b as f,y,F as P,h as R,o as r}from"./index-CE4I7GDV.js";const T={key:0,class:"movie-detail"},U={class:"movie-header"},j=["src"],E={class:"movie-info"},F={class:"movie-plot"},J={class:"comment-form"},O={key:0,class:"error"},$={key:0,class:"comments-list"},h={key:1,class:"loading"},q={__name:"MovieDetailView",setup(G){const b=N(),s=u(null);x(async()=>{const n=await fetch(`https://www.omdbapi.com/?i=${b.params.id}&apikey=6c29f279`);s.value=await n.json()});const m=u(""),v=u(""),d=u(""),g=u(""),p=u([]),w=`comments-${b.params.id}`;x(()=>{const n=localStorage.getItem(w);n&&(p.value=JSON.parse(n))}),S(p,n=>{localStorage.setItem(w,JSON.stringify(n))},{deep:!0});function V(){if(!m.value||!v.value||d.value.length<5){g.value="Заполните все поля корректно";return}g.value="",p.value.push({name:m.value,email:v.value,text:d.value}),m.value="",v.value="",d.value=""}return(n,e)=>{const c=I("router-link");return s.value?(r(),i("div",T,[t("div",U,[t("img",{src:s.value.Poster,alt:"Poster"},null,8,j),t("div",E,[D(c,{class:"home-button",to:"/"},{default:B(()=>[...e[3]||(e[3]=[a("На главную",-1)])]),_:1}),t("h1",null,l(s.value.Title),1),t("p",null,[e[4]||(e[4]=t("strong",null,"Год:",-1)),a(" "+l(s.value.Year),1)]),t("p",null,[e[5]||(e[5]=t("strong",null,"Жанр:",-1)),a(" "+l(s.value.Genre),1)]),t("p",null,[e[6]||(e[6]=t("strong",null,"Рейтинг IMDB:",-1)),a(" "+l(s.value.imdbRating),1)]),t("p",null,[e[7]||(e[7]=t("strong",null,"Длительность:",-1)),a(" "+l(s.value.Runtime),1)])])]),t("div",F,[e[8]||(e[8]=t("h2",null,"Сюжет",-1)),t("p",null,l(s.value.Plot),1)]),t("div",J,[e[13]||(e[13]=t("h2",null,"Оставить комментарий",-1)),t("form",{onSubmit:C(V,["prevent"])},[f(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>m.value=o),placeholder:"Имя"},null,512),[[y,m.value]]),f(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>v.value=o),placeholder:"Email"},null,512),[[y,v.value]]),f(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=o=>d.value=o),placeholder:"Комментарий"},null,512),[[y,d.value]]),g.value?(r(),i("p",O,l(g.value),1)):k("",!0),e[9]||(e[9]=t("button",{type:"submit"},"Отправить",-1))],32),p.value.length?(r(),i("div",$,[e[12]||(e[12]=t("h3",null,"Комментарии:",-1)),(r(!0),i(P,null,R(p.value,(o,_)=>(r(),i("div",{key:_,class:"comment-item"},[t("p",null,[t("strong",null,l(o.name),1),e[10]||(e[10]=a(" (",-1)),t("em",null,l(o.email),1),e[11]||(e[11]=a(") ",-1))]),t("p",null,l(o.text),1)]))),128))])):k("",!0)])])):(r(),i("div",h,"Загрузка..."))}}},L=M(q,[["__scopeId","data-v-bab2b750"]]);export{L as default};
